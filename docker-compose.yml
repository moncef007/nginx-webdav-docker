version: '3.8'

services:
  nginx-webdav:
    build: .
    container_name: nginx-webdav
    ports:
      - "${HTTP_PORT:-9000}:80"
      - "${HTTPS_PORT:-9443}:443"
    volumes:
      - ./data/htpasswd:/etc/nginx/.htpasswd:ro
      - ./data/ssl:/etc/nginx/ssl:rw
      - ./webdav:/var/www/webdav:rw
    restart: unless-stopped
    environment:
      - TZ=UTC
      - SSL_ENABLED=${SSL_ENABLED:-false}
      - SSL_MODE=${SSL_MODE:-auto}
      - SSL_CN=${SSL_CN:-localhost}
      - SSL_ORG=${SSL_ORG:-WebDAV Server}
      - SSL_DAYS=${SSL_DAYS:-365}
    user: root
